(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/authentication/authentication"],{"1c68":function(n,t,e){"use strict";e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return o}));var o={uniForms:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(e.bind(null,"dc79"))},uniGroup:function(){return e.e("uni_modules/uni-group/components/uni-group/uni-group").then(e.bind(null,"03f6"))},uniFormsItem:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(e.bind(null,"1713"))},uniEasyinput:function(){return e.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(e.bind(null,"8747"))}},i=function(){var n=this,t=n.$createElement;n._self._c},a=[]},"65a4":function(n,t,e){"use strict";(function(n){e("a252");o(e("66fd"));var t=o(e("6621"));function o(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])},6621:function(n,t,e){"use strict";e.r(t);var o=e("1c68"),i=e("fbfa");for(var a in i)"default"!==a&&function(n){e.d(t,n,(function(){return i[n]}))}(a);e("6b8d");var u,r=e("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);t["default"]=s.exports},"6b8d":function(n,t,e){"use strict";var o=e("b7b3"),i=e.n(o);i.a},b3ac:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={data:function(){return{focus:!1,authForm:{realname:"",no:"",password:"",repassword:""},job:["查勘人","管理人","负责人"],index:0,multiArray:[["管理部","执行部"],["车辆管理部","审批部"]],multiIndex:[0,0]}},onLoad:function(){var t=this,e="",o="wx42936ad485f33e67",i="8b84771f5074f712daf6bbc53805106c";n.login({success:function(a){e=a.code,t.code=e,n.request({url:"https://api.weixin.qq.com/sns/jscode2session?appid="+o+"&secret="+i+"&js_code="+a.code+"&grant_type=authorization_code",header:{"content-type":"json"},success:function(n){t.openid=n.data.openid}})},fail:function(n){console.log("fail")}})},methods:{bindPickerChange:function(n){this.index=n.target.value},bindMultiPickerColumnChange:function(n){switch(this.multiIndex[n.detail.column]=n.detail.value,n.detail.column){case 0:switch(this.multiIndex[0]){case 0:this.multiArray[1]=["车辆管理部","审批部"];break;case 1:this.multiArray[1]=["查勘部"];break}this.multiIndex.splice(1,1,0),this.multiIndex.splice(2,1,0);break}this.$forceUpdate()},submit:function(){var t=this,e=t.multiArray[0][t.multiIndex[0]]+","+t.multiArray[1][t.multiIndex[1]],o=["survey","manage","vet"],i=o[t.index];""!==t.authForm.realname&&""!==t.authForm.no&&""!==t.authForm.password&&""!==t.authForm.repassword?t.authForm.password==t.authForm.repassword?n.request({url:t.apiServer+"/api/update/verify",data:{no:t.authForm.no,name:t.authForm.realname,position:i,dept:e,wechat:t.openid,password:t.authForm.password},header:{"content-type":"application/x-www-form-urlencoded",enctype:"multipart/form-data"},method:"POST",success:function(e){console.log(e),200===e.data.code?(t.$store.commit("SETTOKEN",e.data.data.token),t.$store.commit("LOGIN",[t.authForm.realname,t.authForm.no,i]),t.$store.state.hasLogin=!0,console.log(t.$store.state),n.showToast({title:"认证成功",icon:"success",duration:1e3,success:function(){"survey"===i&&n.switchTab({url:"../user/index/index"}),"vet"===i&&n.switchTab({url:"../director/index/index"}),"manage"===i&&setTimeout((function(){n.switchTab({url:"../manage/index/index"})}),1e3)}})):303===e.data.code&&n.showToast({title:e.data.msg,icon:"none",duration:1e3})},fail:function(n){console.log("fail")}}):n.showToast({title:"两次密码输入错误",icon:"none"}):n.showToast({title:"请完善表单",icon:"none"})}}};t.default=e}).call(this,e("543d")["default"])},b7b3:function(n,t,e){},fbfa:function(n,t,e){"use strict";e.r(t);var o=e("b3ac"),i=e.n(o);for(var a in o)"default"!==a&&function(n){e.d(t,n,(function(){return o[n]}))}(a);t["default"]=i.a}},[["65a4","common/runtime","common/vendor"]]]);